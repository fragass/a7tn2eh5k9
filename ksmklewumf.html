<!DOCTYPE html>
<html lang="pt-BR">
<head>
      <link rel="icon" href="favicon.png" type="image/png">
    <script>
  // Proteção: exige login em todo acesso
  if (sessionStorage.getItem("auth") !== "true") {
 window.location.href = "index.html";
  }
</script>
  <meta charset="UTF-8">
  <title>Página inicial - Workday</title>
     <style>
  /* Mini perfil container */
  #mini-profile {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.6);
    color: #fff;
    font-family: Arial, sans-serif;
    font-size: 14px;
    padding: 6px 12px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    z-index: 1000;
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    user-select: none;
  }

  #mini-profile span {
    font-weight: bold;
    color: ##fff;
  }

  /* Seta */
#arrow {
  transition: transform 0.3s;
  margin-left: 4px;
}

  /* Dropdown menu */
  #dropdown-menu {
    display: none;
    position: absolute;
    top: 40px; /* logo abaixo do mini-profile */
    right: 0;
    background: rgba(0,0,0,0.9);
    border-radius: 6px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    padding: 6px 10px;
                z-index: 1000;
  }

  #dropdown-menu button {
    background: #ff4d4d;
    color: #fff;
    border: none;
    border-radius: 6px;
    padding: 6px 12px;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.2s;
    width: 100%;
  }

  #dropdown-menu button:hover {
    background: #e60000;
  }
             /* Card de aviso do score, sem fundo, com outline vermelho */
  .alert-card.score-warning {
    width: 200px; /* mesma largura da arena */
    border: 2px solid #ff4d4d;
    border-radius: 8px;
    padding: 8px 12px;
    margin-top: 10px;
    text-align: center;
    color: #ff4d4d;
    font-size: 13px;
    font-weight: bold;
    position: relative;
  }

  .alert-card.score-warning::before {
    content: "!"; /* ponto de exclamação no topo */
    position: absolute;
    top: -12px;
    left: 50%;
    transform: translateX(-50%);
    background: #111;
    padding: 0 6px;
    color: #ff4d4d;
    font-size: 16px;
    font-weight: bold;
  }
</style>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div id="mainWrapper">
    <div class="game-area">
      
      <!-- Painel lateral ESQUERDO -->
      <div class="side-panel left-panel">
        <div class="card">
          <h3>COMANDOS</h3>
          <ul>
            <li><span class="key">←</span> Mover esquerda</li>
            <li><span class="key">→</span> Mover direita</li>
            <li><span class="key">↓</span> Soft drop</li>
            <li><span class="key">↑</span> Rotacionar</li>
            <li><span class="key">Espaço</span> Hard drop</li>
            <li><span class="key">C</span> Hold</li>
            <li><span class="key">P</span> Pausar</li>
            <li><span class="key">R</span> Reiniciar</li>
          </ul>
        </div>
      </div>

      <!-- Arena + scoreboard abaixo -->
      <div class="arena-wrapper">
        <canvas id="tetris" width="200" height="400"></canvas>
        <div id="scoreboard">Score: 0 | Linhas: 0 | Level: 1</div>
      </div>

            <!-- Card de aviso abaixo do scoreboard -->
  <div class="alert-card score-warning">
    Pode ser que esse tetris esteja ainda menos estável que o outro sem ranklist.
  </div>
</div>

      <!-- Painel lateral DIREITO -->
      <div class="side-panel right-panel">
<div id="mini-profile">
   <span id="user-phone"></span>
  <!-- seta fina em SVG -->
  <svg id="arrow" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <polyline points="6 9 12 15 18 9"></polyline>
  </svg>
</div>

  <!-- Dropdown menu -->
  <div id="dropdown-menu">
    <button id="logout">Sair</button>
  </div>

        <div class="next-box">
          <h2>Próximas Peças</h2>
          <div class="next-box-canvases">
            <canvas id="next1" width="100" height="100"></canvas>
            <canvas id="next2" width="100" height="100"></canvas>
            <canvas id="next3" width="100" height="100"></canvas>
          </div>
        </div>
        <div class="controls-side">
          <button id="startPauseBtn" class="btn start">Iniciar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Overlay -->
  <div id="overlayPopup">
    <h2 id="overlayTitle">TETRIS</h2>
    <p id="overlayInfo"></p>
    <button id="overlayBtn" class="btn">Iniciar</button>
  </div>

  <!-- Som opcional -->
  <audio id="lineClearSound" src="lineclear.mp3" preload="auto"></audio>

<script>
  // pega o telefone do usuário logado
  const phone = sessionStorage.getItem("loggedUserPhone");
  if (phone) {
    document.getElementById("user-phone").textContent = phone;
  }

  // proteção extra: redireciona se não estiver logado
  if (sessionStorage.getItem("auth") !== "true") {
    window.location.href = "index.html";
  }
 // dropdown toggle
    const miniProfile = document.getElementById("mini-profile");
    const dropdownMenu = document.getElementById("dropdown-menu");
    const arrow = document.getElementById("arrow");

miniProfile.addEventListener("click", () => {
  const isVisible = dropdownMenu.style.display === "block";
  dropdownMenu.style.display = isVisible ? "none" : "block";
  arrow.style.transform = isVisible ? "rotate(0deg)" : "rotate(180deg)";
});

    // logout: limpa sessão e volta para login
    document.getElementById("logout").addEventListener("click", () => {
      sessionStorage.clear();
      window.location.href = "index.html";
    });

    // opcional: fecha dropdown clicando fora
    document.addEventListener("click", (e) => {
      if (!miniProfile.contains(e.target) && !dropdownMenu.contains(e.target)) {
        dropdownMenu.style.display = "none";
        arrow.style.transform = "rotate(0deg)";
      }
    });
</script>
      
  <script src="js/script.js"></script>
</body>
</html>






















